!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.cubismrenderer=i():t.cubismrenderer=i()}(this,()=>(()=>{"use strict";var t,i,e,r,s={d:(t,i)=>{for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},l={};s.r(l),s.d(l,{CubismBlendMode:()=>e,CubismClippingContext:()=>u,CubismRenderer:()=>h,CubismTextureColor:()=>a,Live2DCubismFramework:()=>r});class o{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(t,i,e){const r=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);for(let e=0;e<4;++e)for(let s=0;s<4;++s)for(let l=0;l<4;++l)r[s+4*e]+=t[l+4*e]*i[s+4*l];for(let t=0;t<16;++t)e[t]=r[t]}loadIdentity(){const t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)}setMatrix(t){for(let i=0;i<16;++i)this._tr[i]=t[i]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(t){return this._tr[0]*t+this._tr[12]}transformY(t){return this._tr[5]*t+this._tr[13]}invertTransformX(t){return(t-this._tr[12])/this._tr[0]}invertTransformY(t){return(t-this._tr[13])/this._tr[5]}translateRelative(t,i){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1]);o.multiply(e,this._tr,this._tr)}translate(t,i){this._tr[12]=t,this._tr[13]=i}translateX(t){this._tr[12]=t}translateY(t){this._tr[13]=t}scaleRelative(t,i){const e=new Float32Array([t,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]);o.multiply(e,this._tr,this._tr)}scale(t,i){this._tr[0]=t,this._tr[5]=i}multiplyByMatrix(t){o.multiply(t.getArray(),this._tr,this._tr)}clone(){const t=new o;for(let i=0;i<this._tr.length;i++)t._tr[i]=this._tr[i];return t}}!function(t){t.CubismMatrix44=o}(t||(t={}));class n{constructor(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}expand(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i}}!function(t){t.csmRect=n}(i||(i={}));class h{static create(){return null}static delete(t){}initialize(t){this._model=t}drawModel(){null!=this.getModel()&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(t){this._mvpMatrix4x4.setMatrix(t.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(t,i,e,r){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),this._modelColor.r=t,this._modelColor.g=i,this._modelColor.b=e,this._modelColor.a=r}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}getModelColorWithOpacity(t){const i=this.getModelColor();return i.a*=t,this.isPremultipliedAlpha()&&(i.r*=i.a,i.g*=i.a,i.b*=i.a),i}setIsPremultipliedAlpha(t){this._isPremultipliedAlpha=t}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(t){this._isCulling=t}isCulling(){return this._isCulling}setAnisotropy(t){this._anisotropy=t}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(t){this._useHighPrecisionMask=t}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._model=null,this._modelColor=new a,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new o,this._mvpMatrix4x4.loadIdentity()}}!function(t){t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative"}(e||(e={}));class a{constructor(t=1,i=1,e=1,r=1){this.r=t,this.g=i,this.b=e,this.a=r}}class u{constructor(t,i){this._clippingIdList=t,this._clippingIdCount=i,this._allClippedDrawRect=new n,this._layoutBounds=new n,this._clippedDrawableIndexList=[],this._matrixForMask=new o,this._matrixForDraw=new o,this._bufferIndex=0}release(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)}addClippedDrawable(t){this._clippedDrawableIndexList.push(t)}}return function(t){t.CubismBlendMode=e,t.CubismRenderer=h,t.CubismTextureColor=a}(r||(r={})),l})());